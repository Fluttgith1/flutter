// Copyright 2014 The Flutter Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

import 'package:flutter/services.dart' show TextInputAction;

import 'enum_util.dart';
import 'message.dart';

export 'package:flutter/services.dart' show TextInputAction;

EnumIndex<TextInputAction> _textInputActionIndex =
    EnumIndex<TextInputAction>(TextInputAction.values);

/// A Flutter Driver command that send the [TextInputAction]
class ReceiveAction extends Command {
  /// Creates a command that enters text into the currently focused widget.
  const ReceiveAction(this.textInputAction, {Duration? timeout})
      : super(timeout: timeout);

  /// Deserializes this command from the value generated by [serialize].
  ReceiveAction.deserialize(Map<String, String> json)
      : textInputAction =
            _textInputActionIndex.lookupBySimpleName(json['action']!),
        super.deserialize(json);

  /// The [TextInputAction]
  final TextInputAction textInputAction;

  @override
  String get kind => 'receive_action';

  @override
  Map<String, String> serialize() => super.serialize()
    ..addAll(<String, String>{
      'action': _textInputActionIndex.toSimpleName(textInputAction),
    });
}
