// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

import 'find.dart';
import 'message.dart';

/// A Flutter Driver command that reads the text from a given element.
class GetText extends CommandWithTarget {
  /// [finder] looks for an element that contains a piece of text.
  GetText(SerializableFinder finder, { Duration timeout }) : super(finder, timeout: timeout);

  /// Deserializes this command from the value generated by [serialize].
  GetText.deserialize(Map<String, dynamic> json) : super.deserialize(json);

  @override
  final String kind = 'get_text';
}

/// The result of the [GetText] command.
class GetTextResult extends Result {
  /// Creates a result with the given [text].
  GetTextResult(this.text);

  /// The text extracted by the [GetText] command.
  final String text;

  /// Deserializes the result from JSON.
  static GetTextResult fromJson(Map<String, dynamic> json) {
    return GetTextResult(json['text']);
  }

  @override
  Map<String, dynamic> toJson() => <String, String>{
    'text': text,
  };
}

/// A Flutter Driver command that reads the text from a given TextField element.
class GetTextFieldText extends CommandWithTarget {
  /// [finder] looks for an element that contains a piece of text.
  GetTextFieldText(SerializableFinder finder, { Duration timeout }) : super(finder, timeout: timeout);

  /// Deserializes this command from the value generated by [serialize].
  GetTextFieldText.deserialize(Map<String, dynamic> json) : super.deserialize(json);

  @override
  final String kind = 'get_text_field_text';
}

/// The result of the [GetTextFieldText] command.
class GetTextFieldTextResult extends Result {
  /// Creates a result with the given [text].
  GetTextFieldTextResult(this.text);

  /// The text extracted by the [GetTextFieldText] command.
  final String text;

  /// Deserializes the result from JSON.
  static GetTextFieldTextResult fromJson(Map<String, dynamic> json) {
    return GetTextFieldTextResult(json['text']);
  }

  @override
  Map<String, dynamic> toJson() => <String, String>{
    'text': text,
  };
}

/// A Flutter Driver command that enters text into the currently focused widget.
class EnterText extends Command {
  /// Creates a command that enters text into the currently focused widget.
  EnterText(this.text, { Duration timeout }) : super(timeout: timeout);

  /// Deserializes this command from the value generated by [serialize].
  EnterText.deserialize(Map<String, dynamic> json)
      : text = json['text'],
        super.deserialize(json);

  /// The text extracted by the [GetText] command.
  final String text;

  @override
  final String kind = 'enter_text';

  @override
  Map<String, String> serialize() => super.serialize()..addAll(<String, String>{
    'text': text,
  });
}

/// The result of the [EnterText] command.
class EnterTextResult extends Result {
  /// Creates a successful result of entering the text.
  EnterTextResult();

  /// Deserializes the result from JSON.
  static EnterTextResult fromJson(Map<String, dynamic> json) {
    return EnterTextResult();
  }

  @override
  Map<String, dynamic> toJson() => const <String, String>{};
}

/// A Flutter Driver command that sets the state of a text field
class SetEditingState extends Command {
  /// Creates a command that enters text into the currently focused widget.
  SetEditingState(this.textEditingValue, { Duration timeout }) : super(timeout: timeout);

  /// Deserializes this command from the value generated by [serialize].
  SetEditingState.deserialize(Map<String, dynamic> json)
      : textEditingValue = json['textEditingValue'],
        super.deserialize(json);

  /// The text extracted by the [GetText] command.
  final String textEditingValue;

  @override
  final String kind = 'set_editing_state';

  @override
  Map<String, String> serialize() => super.serialize()..addAll(<String, String>{
    'textEditingValue': textEditingValue,
  });
}

/// The result of the [SetEditingState] command.
class SetEditingStateResult extends Result {
  /// Creates a successful result of set text field state.
  SetEditingStateResult();

  /// Deserializes the result from JSON.
  static SetEditingStateResult fromJson(Map<String, dynamic> json) {
    return SetEditingStateResult();
  }

  @override
  Map<String, dynamic> toJson() => const <String, String>{};
}

/// A Flutter Driver command that sets the state of a text field
class SetMarkedText extends Command {
  /// Creates a command that enters text into the currently focused widget.
  SetMarkedText(this.markedTextValue, { Duration timeout }) : super(timeout: timeout);

  /// Deserializes this command from the value generated by [serialize].
  SetMarkedText.deserialize(Map<String, dynamic> json)
      : markedTextValue = json['markedTextValue'],
        super.deserialize(json);

  /// The text extracted by the [GetText] command.
  final String markedTextValue;

  @override
  final String kind = 'set_marked_text';

  @override
  Map<String, String> serialize() => super.serialize()..addAll(<String, String>{
    'markedTextValue': markedTextValue,
  });
}

/// The result of the [SetMarkedText] command.
class SetMarkedTextResult extends Result {
  /// Creates a successful result of set text field state.
  SetMarkedTextResult();

  /// Deserializes the result from JSON.
  static SetMarkedTextResult fromJson(Map<String, dynamic> json) {
    return SetMarkedTextResult();
  }

  @override
  Map<String, dynamic> toJson() => const <String, String>{};
}

/// A Flutter Driver command that enables and disables text entry emulation.
class SetTextEntryEmulation extends Command {
  /// Creates a command that enables and disables text entry emulation.
  SetTextEntryEmulation(this.enabled, { Duration timeout }) : super(timeout: timeout);

  /// Deserializes this command from the value generated by [serialize].
  SetTextEntryEmulation.deserialize(Map<String, dynamic> json)
      : enabled = json['enabled'] == 'true',
        super.deserialize(json);

  /// Whether text entry emulation should be enabled.
  final bool enabled;

  @override
  final String kind = 'set_text_entry_emulation';

  @override
  Map<String, String> serialize() => super.serialize()..addAll(<String, String>{
    'enabled': '$enabled',
  });
}

/// The result of the [SetTextEntryEmulation] command.
class SetTextEntryEmulationResult extends Result {
  /// Creates a successful result.
  SetTextEntryEmulationResult();

  /// Deserializes the result from JSON.
  static SetTextEntryEmulationResult fromJson(Map<String, dynamic> json) {
    return SetTextEntryEmulationResult();
  }

  @override
  Map<String, dynamic> toJson() => const <String, String>{};
}
